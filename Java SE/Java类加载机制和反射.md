## 类的加载

当程序主动使用到某个类时，如果该类还未被加载到内存中，则系统会通过加载、连接、初始化三个步骤来对该类进行初始化。

###类的加载
指的是将类的class文件读入内存，并为之创建一个java.lang.Class对象。加载类的二进制数据的来源：
- 从本地文件系统加载class文件
- 从JAR包加载class文件
- 通过网络加载class文件
- 把一个java源文件动态编译，并执行加载

### 类的连接

当类被加载之后，系统为之生成一个对应的Class对象，接着将会进入连接阶段，连接阶段负责将类的二进制数据合并到JRE中。类的连接又可以分为以下三个阶段：
- 验证：验证阶段用于检测被加载的类是否有正确的内部结构，并和其他类协调一致；
- 准备：类准备阶段负责为类的类变量分配内存；
- 解析：将类的二进制数据中的符号引用替换为直接引用。

### 类的初始化

在类的初始化阶段，虚拟机负责对类进行初始化，主要就是对类的变量进行初始化。一般包括如下几个步骤：
- 假如这个类还没有被加载和连接，则程序先加载并连接该类；
- 假如该类的直接父类还没有初始化，则先初始化其直接父类；
- 假如类中有初始化语句，则系统依次执行这些初始化语句。

### 类的初始化时机

- 创建类的实例；
- 调用某个类的方法（静态方法）；
- 访问某个类或接口的类变量，或为该类变量赋值；
- 使用反射方式来强制创建某个类或接口对应的java.lang.Class对象。
- 初始化某个类的子类；
- 直接使用java.exe命令来运行某个主类。

特殊情况：对于一个final类型的类变量，如果该类变量的值在编译时就可以确认下来，Java编译器会在编译时直接把这个类变量出现的地方替换为它的值，因此即使程序使用该静态类变量也不会导致类的初始化；反之，如果final修饰的类变量的值不能在编译时确定下来，则必须等到运行时确定该类变量的值，如果通过该类来访问它的类变量，则会导致该类被初始化。

## 类加载器






                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      